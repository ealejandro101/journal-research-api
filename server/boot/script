module.exports = function (app) {
    var mongoatlas = app.dataSources.mongoatlas;

    console.log('Inicio script en boot');
    // Instance JSON document
    var revista = {
        titulo: 'Revista Colombiana de Biotecnología',
        subtitulo: 'Una revista con amor',
        titulo_corto: 'Revicol',
        issn: '1234-6575',
        eissn: '4533-6767',
        periodicidad: '6 meses',
        responsable: {
            nombre: 'alejandro escobar',
            email: 'x@sample.com'
        },
        emails: [
            { label: 'work', id: 'x@sample.com' },
            { label: 'home', id: 'x@home.com' }
        ],
        institucion: {
            nombre: 'Universidad de Antioquia',
            facultad: 'Facultad de Ingenieria',
            ubicacion: {
                direccion: '1 Main St',
                ciudad: 'San Jose',
                estado: 'CA',
                zipcode: '95131',
                pais: 'US'
            }
        },
        categoria: {
            nombre: 'Ciencias Agrarias',
            icono_g: 'logo.png',
            icono_p: 'logogrande.png'
        },
        ubicacion: {
            direccion: '1 Main St',
            ciudad: 'San Jose',
            estado: 'CA',
            zipcode: '95131',
            pais: 'US'
        },
        licencia: {
            label: 'Creative Commons 4',
            image: 'sdsdf.png'
        },
        url: 'https://digithum.uoc.edu/',
        social: {
            facebook: 'face/sdf',
            twitter: 'sdfsdf'
        },
        direccion_postal: {
            direccion: '1 Main St',
            ciudad: 'San Jose',
            estado: 'CA',
            zipcode: '95131',
            pais: 'US'
        },
        imagen: 'logo.png',
        ultima_portada: 'sksks',
        descripcion: 'Una revista dedicada al ejemplo',
        politica_autoarchivo: 'cada 6 años',
        doi: '3232323',
        redalyc: 'sdfsdfsdf',
        tags: []
    };

    var categoria =
    {
        nombre: 'Ciencias Agrarias',
        icono_g: 'logo.png',
        icono_p: 'logogrande.png'
    };

    var licencia = {
        nombre: 'Creative Commons 4'
    };

    /** 
        console.log('buildModelFromInstance Revista');
        // Create a model from the revista instance
        var Revista = mongoatlas.buildModelFromInstance('Revista', revista, { idInjection: true });
        // Use the model for create, retrieve, update, and delete
    
        revista.responsable = {
            nombre: 'otro escobar',
            email: 'x@sample.com'
        };
        var obj = new Revista(revista);
        console.log(' Revista --- ' + obj.toObject());
    
        Revista.create(revista, function (err, u1) {
            console.log('Created: ', u1.toObject());
            Revista.findById(u1.id, function (err, u2) {
                console.log('Found: ', u2.toObject());
            });
        });*/


    console.log('buildModelFromInstance Categoria');
    var Categoria = mongoatlas.buildModelFromInstance('Categoria', categoria, { idInjection: true });
    // Use the model for create, retrieve, update, and delete
    var obj1 = new Categoria(categoria);
    console.log(' Categoria --- ' + obj1.toObject());

    /**Categoria.create(categoria, function (err, u1) {
        console.log('Created: ', u1.toObject());
        Categoria.findById(u1.id, function (err, u2) {
            console.log('Found: ', u2.toObject());
        });
    });*/


    console.log('buildModelFromInstance Licencia');
    var Licencia = mongoatlas.buildModelFromInstance('Licencia', licencia, { idInjection: true });
    // Use the model for create, retrieve, update, and delete
    var obj2 = new Licencia(licencia);
    console.log(' Licencia --- ' + obj2.toObject());

    /**Licencia.create(licencia, function (err, u1) {
        console.log('Created: ', u1.toObject());
        Licencia.findById(u1.id, function (err, u2) {
            console.log('Found: ', u2.toObject());
        });
    });*/

    console.log('Finalizo script en boot');


    //app.model(Revista);
    app.model(Categoria);
    app.model(Licencia);

};
